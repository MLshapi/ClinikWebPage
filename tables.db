CREATE TABLE `clinic`(
	`c_id` INT NOT NULL AUTO_INCREMENT,
	`c_name` VARCHAR(25) NOT NULL,
	`location` TEXT NOT NULL,
	PRIMARY KEY(`c_id`)
);

CREATE TABLE `patient`(
	`p_id` INT NOT NULL AUTO_INCREMENT,
	`first_name` VARCHAR(25) NOT NULL,
	`last_name` VARCHAR(25) NOT NULL,
	PRIMARY KEY(`p_id`)
);

CREATE TABLE `dentist`(
	`d_id` INT NOT NULL AUTO_INCREMENT,
	`first_name` VARCHAR(25) NOT NULL,
	`last_name` VARCHAR(25) NOT NULL,
	`c_id` INT NOT NULL,
	PRIMARY KEY(`d_id`)
);

CREATE TABLE `appointment`(
	`a_id` INT NOT NULL AUTO_INCREMENT,
`p_id` INT NOT NULL,
	`d_id` INT NOT NULL,
	`c_id` INT NOT NULL,
	`date` DATE NOT NULL,
	PRIMARY KEY(`a_id`)
);

CREATE TABLE `treatment`(
	`t_id` INT NOT NULL AUTO_INCREMENT,
	`a_id` INT NOT NULL,
`p_id` INT NOT NULL,
	`d_id` INT NOT NULL,
	`description` TEXT NOT NULL,
	`price` DOUBLE NOT NULL,
	PRIMARY KEY(`t_id`)
);

CREATE TABLE `bill`(
	`b_id` INT NOT NULL AUTO_INCREMENT,
`p_id` INT NOT NULL,
	`t_id` INT NOT NULL,
	`price` DOUBLE NOT NULL,
`paid` TINYINT(1) NOT NULL DEFAULT(0),
	PRIMARY KEY(`b_id`)
);

ALTER TABLE `dentist`
ADD FOREIGN KEY (`c_id`) REFERENCES clinic(`c_id`);

ALTER TABLE `appointment`
ADD FOREIGN KEY (`p_id`) REFERENCES patient(`p_id`),
ADD FOREIGN KEY (`d_id`) REFERENCES dentist(`d_id`),
ADD FOREIGN KEY (`c_id`) REFERENCES clinic(`c_id`);


ALTER TABLE `treatment`
ADD FOREIGN KEY (`a_id`) REFERENCES appointment(`a_id`),
ADD FOREIGN KEY (`p_id`) REFERENCES patient(`p_id`),
ADD FOREIGN KEY (`d_id`) REFERENCES dentist(`d_id`);

ALTER TABLE `bill`
ADD FOREIGN KEY (`p_id`) REFERENCES patient(`p_id`),
ADD FOREIGN KEY (`t_id`) REFERENCES treatment(`t_id`);


INSERT INTO clinic(`c_id`,`c_name`,`location`)
VALUES
(1, 'Dental Clinic' , '333 Montreal Av. Est'),
(2, 'Save Teeth' , '636  Montreal Av. West'),
(3, 'Clean Smile' , '466 Laval St. Est'),
(4, 'Say Cheese' , '666 Montreal Av. South'),
(5, 'Floss' , '3468 Montreal Av. Est'),
(6, 'Sweet Tooth' , '388 Montreal Av. Est'),
(7, 'Brush' , '3688 Montreal Av. Est'),
(8, 'White Teeth' , '33 Montreal Av. Est'),
(9, 'Fresh Breath' , '8845 Montreal Av. Est'),
(10, 'Good Dental' , '8853 Montreal Av. Est');

INSERT INTO dentist(`d_id`,`first_name`,`last_name`,`c_id`)
VALUES
(1, 'Bob' , 'Dentist' , 1),
	(2, 'John' , 'Doe' , 2),
	(3, 'Richard' , 'Gauthier' , 3),
	(4, 'Pierre' , 'Guy' , 4),
	(5, 'Alfred' , 'White' , 5),
	(6, 'Anne' , 'Carron' , 6),
	(7, 'Stephen' , 'Harvey' , 7),
	(8, 'Nathalie' , 'Dudette' , 8),
	(9, 'Jerry' , 'King' , 9),
	(10, 'Sonia' , 'LaFille' , 10);

INSERT INTO patient(`p_id`,`first_name`,`last_name`)
VALUES
(1, 'Stefan' , 'Bosco'),
	(2, 'Antoine' , 'Deb' );

INSERT INTO appointment(`a_id`,`p_id`,`d_id`,`c_id`,`date`)
VALUES
(1, 1 , 3, 3, '2020-02-14'),
	(2, 2 , 6, 6, '2020-03-22' );

INSERT INTO treatment(`t_id`,`a_id`,`p_id`,`d_id`,`description`,`price`)
VALUES
(1, 1 , 1, 3, 'Tooth Repair', 150.00),
	(2, 2 , 2, 6, 'Remove gums', 90.00);


INSERT INTO bill(`b_id`,`p_id`,`t_id`,`price`,`paid`)
VALUES
(1, 1 , 1, 150.00,1),
	(2, 2 , 2, 90.00,0);
